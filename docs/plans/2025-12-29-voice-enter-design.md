# VoiceEnter 产品设计文档

> 语音输入后自动回车，解放双手的编程体验

## 背景与问题

使用语音输入与 AI 编程助手（如 Claude Code）交流时，每次说完都需要手动按回车发送。这个小动作打断了流畅的体验，特别是在以下场景：

- 躺着编程
- 站立办公、边踱步边思考
- 手被占用（吃东西、抱猫、抱娃）
- 手部不便（RSI、残障人士）
- 就是懒，不想动

## 目标用户

**核心画像**：想要解放双手/身体姿势，但仍需要与电脑交互的人

## 解决方案

采用**两条线并行**策略：

| 方案 | 形态 | 优势 | 时间 |
|------|------|------|------|
| 方案 A | 软件（macOS 菜单栏工具） | 零成本、立即可用 | 本周 |
| 方案 B | 硬件（蓝牙小遥控器） | 物理触感、确定性强 | 下周验证 |

---

## 方案 A：软件方案

### 产品形态

macOS 菜单栏常驻小工具

### 核心功能

1. **后台监听**：监听系统输入框的文本变化
2. **关键词检测**：检测到触发词时触发动作
3. **自动回车**：删除触发词 + 模拟按回车键
4. **状态显示**：菜单栏图标显示开关状态

### 触发词设计

- **默认触发词**："发送"、"Go"
- **用户自定义**：支持添加/删除自定义触发词
- **匹配规则**：输入内容以触发词结尾时触发

### 技术方案

**选项 1：Swift + SwiftUI（推荐）**
- 原生体验最好
- 系统权限获取更自然
- 适合长期维护

**选项 2：Python + rumps**
- 开发速度快
- 适合快速验证原型

### 权限需求

- **辅助功能权限**：用于监听输入和模拟按键
- 需要在系统设置中手动授权

### 交互设计

```
菜单栏图标：🎤（开启）/ 🔇（关闭）

点击图标展开菜单：
├── ✓ 启用 VoiceEnter
├── ──────────────
├── 触发词设置...
├── ──────────────
├── 关于
└── 退出
```

---

## 方案 B：硬件方案

### MVP 产品形态

AirTag 大小的蓝牙小遥控器

### 核心功能

按一下 → 通过蓝牙发送回车键码

### 技术选型

| 组件 | 选择 | 理由 |
|------|------|------|
| 主控芯片 | ESP32-C3 | 便宜(¥10)、蓝牙低功耗、资料丰富 |
| 输入方式 | 微动按钮 | 简单可靠、手感清晰 |
| 供电 | CR2032 纽扣电池 | 体积小、续航长、易更换 |
| 外壳 | 3D 打印 | 快速原型、成本低 |

### 预估成本

| 项目 | 成本 |
|------|------|
| ESP32-C3 开发板 | ¥15-20 |
| 微动按钮 | ¥1-2 |
| 电池座 + 电池 | ¥5 |
| 其他（线材、外壳） | ¥10 |
| **合计** | **¥30-40** |

### 蓝牙 HID 实现

ESP32-C3 支持 BLE HID（蓝牙低功耗人机接口设备），可以模拟键盘：

1. 设备作为 BLE HID Keyboard 被电脑识别
2. 按下按钮时发送 Enter 键码 (0x28)
3. 不需要任何驱动或配对软件

### 产品演进路径

```
MVP（小遥控器）
    ↓ 验证需求
V2（更小型化）
    ↓ 优化体验
V3（戒指/指环形态）
    ↓ 量产
正式产品
```

---

## 执行计划

### 第一阶段：本周（软件方案）

- [ ] 搭建 macOS 菜单栏应用框架
- [ ] 实现输入监听功能
- [ ] 实现触发词检测 + 模拟回车
- [ ] 添加触发词设置界面
- [ ] 自己日常使用测试

### 第二阶段：下周（硬件原型）

- [ ] 购买 ESP32-C3 开发板
- [ ] 搭建开发环境（Arduino IDE 或 ESP-IDF）
- [ ] 实现 BLE HID 键盘功能
- [ ] 按钮触发发送回车
- [ ] 与 Mac 配对测试

### 第三阶段：2周后（决策点）

- 评估两个方案的使用体验
- 决定是否继续推进为产品
- 如果继续，规划小型化和外观设计

---

## 商业化思考（如果继续）

### 定位

**极简单一功能的蓝牙回车按钮**

### 目标定价

- MVP 遥控器形态：¥99-149
- 戒指/指环形态：¥199-299

### 潜在竞品

- 通用蓝牙遥控器（但没有针对这个场景优化）
- 脚踏板（不够便携）
- 语音助手（延迟高、不够确定）

### 差异化

- 专为"语音输入 + AI 工具"场景设计
- 极简、即插即用、零学习成本
- 未来可扩展为可穿戴形态

---

## 风险与待定项

| 风险 | 应对 |
|------|------|
| macOS 辅助功能权限获取复杂 | 提供清晰的授权引导 |
| 蓝牙 HID 延迟 | 测试实际延迟，ESP32 通常 <50ms |
| 戒指形态电池续航 | MVP 先不考虑，后续用更小电池 + 低功耗优化 |
| 市场需求不确定 | 先自己用，再小范围测试 |

---

## 附录：技术参考

### ESP32-C3 BLE HID 资料

- [ESP-IDF BLE HID 示例](https://github.com/espressif/esp-idf/tree/master/examples/bluetooth/bluedroid/ble/ble_hid_device_demo)
- [Arduino ESP32 BLE Keyboard 库](https://github.com/T-vK/ESP32-BLE-Keyboard)

### macOS 输入监听

- Accessibility API (AXUIElement)
- CGEventTap（用于全局按键监听/模拟）
